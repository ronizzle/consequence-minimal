{% extends 'consequence/dashboard/base.html' %}

{% block content %}
<p class="h3 header">Account: {{account.display_name}}</p>
<table class="table table-dark table-bordered table-hover table-striped">
    <tr>
        <td><strong>Account ID:</strong></td>
        <td>{{account.account_id}}</td>
    </tr>
    <tr>
        <td><strong>Number:</strong></td>
        <td>{{account.account_number.number}}</td>
    </tr>
    <tr>
        <td><strong>Sort Code:</strong></td>
        <td>{{account.account_number.sort_code}}</td>
    </tr>
    <tr>
        <td><strong>Swift BIC:</strong></td>
        <td>{{account.account_number.swift_bic}}</td>
    </tr>
    <tr>
        <td><strong>Account Type:</strong></td>
        <td>{{account.account_type}}</td>
    </tr>
    <tr>
        <td><strong>Display Name:</strong></td>
        <td>{{account.display_name}}</td>
    </tr>
    <tr>
        <td><strong>Provider:</strong></td>
        <td>
            <img height="100" width="100" src="{{account.provider.logo_uri}}" alt="{{account.provider.provider_id}}">
            {{account.provider.display_name}}
        </td>
    </tr>
</table>

<p class="h5 header">Account Transactions</p>

<table class="table table-dark table-bordered table-hover table-striped">
    <thead>
        <th><strong>Timestamp</strong></th>
        <th><strong>Description</strong></th>
        <th><strong>Transaction Type</strong></th>
        <th><strong>Amount</strong></th>
        <th><strong>Currency</strong></th>
        <th><strong>Running Balance</strong></th>
    </thead>
    {% for account_transaction in account_transactions %}
        <tr>
            <td>{{account_transaction.timestamp}}</td>
            <td>{{account_transaction.description}}</td>
            <td>{{account_transaction.transaction_type}}</td>
            <td>{{account_transaction.amount}}</td>
            <td>{{account_transaction.currency}}</td>
            <td>{{account_transaction.running_balance.amount}}</td>
            <td>
                <form method="POST" action="{%url 'truelayer_link_account_transaction' account_transaction.transaction_id account_transaction.transaction_id %}">

                    <button type="submit" class="btn btn-danger">Link</button>
                </form>
            </td>
        </tr>
    {% endfor %}
</table>
{% endblock %}